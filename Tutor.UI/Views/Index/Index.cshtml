@model Tutor.UI.ViewModels.IndexVM
@*@using Model;*@

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Lauout.cshtml";
    ViewBag.loginviewmodel = new Model.Teacher();
}
<link href="~/Css/index.css" rel="stylesheet"/>
<link href="~/Css/font-awesome.min.css" rel="stylesheet" />
<script src="~/scripts/jquery-3.3.1.js"></script>

<div class="firstdiv">
    <div class="selectdiv">
        <ul>
            <li>
                <div class="choose" id="choosegrade">
                    <span>选择年级</span>
                    <span class="fa fa-sort-desc fa-2x triangle"></span>
                    <ul>
                        @foreach (var item in Model.grade)
                        {
                                <li><span data-id="@item.Grade_id">@item.Grade1</span></li>
                        }
                    </ul>
                </div>
            </li>
            <li>
                <div class="choose" id="choosesub">
                    <span>选择学科</span>
                    <span class="fa fa-sort-desc fa-2x triangle"></span>
                    <ul>
                    </ul>
                </div>
            </li>
        </ul>
    </div>
    <div class="logindiv">
        @if (Session["Tuser_id"] == null)
        {
            @Html.Partial("_login", Model.teacher)
        }
        else
        {
            @Html.Partial("notice")
        }        
        
    </div>
</div>
<div style="width:81%;margin:0 auto;background-color:beige;">
    <div>
        <div>
            <div title=""><h2>教员推荐</h2></div>
            <div class="nextpage">
                <span>
                    <span>1</span>/<span>8</span>
                </span>
                <a href="#">上一个</a>
                <a href="#">下一个</a>
            </div>
            <ul>
                <li>
                    <div>

                    </div>
                </li>
            </ul>
        </div>
    </div>
    <div>

    </div>
</div>
<div class="task">
    @foreach(var item in Model.task)
    {
        <div class="singlecase">
            <div class="Ttop">
                <div>@item.Student.Suser_name 急需家教</div>
                <div>辅导 @item.Subject</div>
                <div>
                    <strong>面议</strong>
                </div>
            </div>
            <div class="Tbottom">
                <span class="fa fa-location-arrow"></span>
                <span>@item.Location</span>
                <div>等待您来应聘</div>
                <a href="#">我要应聘</a>
            </div>
        </div>
    }
</div>
<script>
    //choosegrade
    $("#choosegrade").hover(function () {
        $("#choosegrade>ul").css({"display":"block","background-color":"white","z-index":"100","cursor":"pointer"});
    }).mouseleave(function () {
        $("#choosegrade>ul").css("display", "none");
    });

    //choosesubject
    $("#choosesub").hover(function () {
        $("#choosesub>ul").css({ "display": "block", "background-color": "white", "z-index": "100", "cursor": "pointer"});
    }).mouseleave(function () {
        $("#choosesub>ul").css("display", "none");
    })
    //loginbox
    $(".choosebar span:nth-child(1)").hover(function () {
        $(".teacherbox").css("display", "block");
        $(".studentbox").css("display", "none");
        $(".choosebar span:nth-child(1)").css("border", "none");
        $(".choosebar span:nth-child(2)").css({ "border-bottom": "1px solid lightgray", "border-left": "1px solid lightgray" });
    });
    $(".choosebar span:nth-child(2)").hover(function () {
        $(".studentbox").css("display", "block");
        $(".teacherbox").css("display", "none");
        $(".choosebar span:nth-child(2)").css("border", "none");
        $(".choosebar span:nth-child(1)").css({"border-bottom":"1px solid lightgray","border-right":"1px solid lightgray"})
    })

    //获取年级和科目的数据
    $("#choosegrade ul li span").click(function (event) {
        console.log(event);
        var grade_id = event.currentTarget.dataset.id;
            //$("#choosegrade ul li span").attr("data-id");
        $.get("/Index/getsubject/" + grade_id, function (data) {
            console.log(data);
            //var name =data[0].subject1;
            for (var x in data) {
                console.log(data[x].subject1);
                var sub = $("<li></li>").text(data[x].subject1);
                $("#choosesub ul").append(sub);
            }
        })
    })
</script>